<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AgriTech - Customer</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <header>
    <h1>Welcome to AgriTech</h1>
  </header>
  
  <nav>
    <a href="{{ url_for('home') }}">Home</a>
    <a href="{{ url_for('customer') }}">Products</a>
    <a href="{{ url_for('features') }}">Features</a>
    <a href="{{ url_for('about') }}">About</a>
  </nav>
  
  <section class="product-grid" id="productGrid">
    <!-- Products will be dynamically inserted here -->
  </section>
  
  <section class="cart">
    <h2>Shopping Cart</h2>
    <ul id="cartItems"></ul>
    <button onclick="checkout()">Checkout</button>
  </section>
  
  <script>
    const products = [
      { id: 1, name: "Fresh Tomatoes", price: 50 },
      { id: 2, name: "Organic Potatoes", price: 40 },
      { id: 3, name: "Green Chilis", price: 30 }
    ];

    function displayProducts() {
      const grid = document.getElementById('productGrid');
      grid.innerHTML = "";
      products.forEach(product => {
        const productDiv = document.createElement('div');
        productDiv.className = 'product';
        productDiv.innerHTML = `
          <h3>${product.name}</h3>
          <p>Price: ₹${product.price}</p>
          <label>Quantity: <input type="number" value="1" min="1" id="qty-${product.id}"></label>
          <button onclick="addToCart(${product.id})">Add to Cart</button>
        `;
        grid.appendChild(productDiv);
      });
    }

    function addToCart(productId) {
      const product = products.find(p => p.id === productId);
      const quantity = parseInt(document.getElementById(`qty-${product.id}`).value);
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      const existing = cart.find(item => item.id === productId);
      if (existing) {
        existing.quantity += quantity;
      } else {
        cart.push({ ...product, quantity });
      }
      localStorage.setItem('cart', JSON.stringify(cart));
      displayCart();
    }

    function displayCart() {
      const cartItems = document.getElementById('cartItems');
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      cartItems.innerHTML = "";
      cart.forEach(item => {
        const li = document.createElement('li');
        li.innerText = `${item.name} - ₹${item.price} x ${item.quantity}`;
        cartItems.appendChild(li);
      });
    }

    function checkout() {
      // This is where you would send cart details to your server.
      alert("Checkout functionality not implemented in prototype.");
    }

    window.onload = function() {
      displayProducts();
      displayCart();
    }
  </script>
  
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
